<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>

		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div id="image">
			<p id="pic"></p>
		</div>
		<div id="task">
			<p align='center'>Задай общий вопрос к предложению.<br> Расставь слова в нужном порядке.</p>
		</div>
		<div id="sentence">
			<p id="sentence_"></p>
		</div>
		<ul id="wordblock" align="center">
		</ul>
		<div id="score">
			<p id="score_cnt">Очки: 0/12</p>
		</div>
		<script>
			var score = 0
			var level = 0
			sentences = ['He likes traveling.',
						 'Her name is Lisa.',
						 'John lives in New York.',
						 'They like oranges.',
						 'You have a brother.',
						 'Melissa is from Manchester.',
						 'The grandpa is old.',
						 'The film is boring.',
						 'We run very fast',
						 'My sister is 12 years old.',
						 'My best friend has a dog.',
						 'I am very smart.'];
			questions = [['does', 'he', 'like', 'traveling', '?'],
						 ['is', 'her', 'name', 'Lisa', '?'],
						 ['does', 'John', 'live', 'in', 'New', 'York','?'],
						 ['do', 'they', 'like', 'oranges', '?'],
						 ['do', 'you', 'have', 'a', 'brother', '?'],
						 ['is', 'Melissa', 'from', 'Manchester', '?'],
						 ['is', 'the', 'Grandpa', 'old', '?'],
						 ['is', 'this', 'film', 'boring', '?'],
						 ['do', 'we', 'run', 'very', 'fast', '?'],
						 ['is', 'my', 'sister', '12', 'years', 'old', '?'],
						 ['does', 'my', 'best', 'friend', 'have', 'a', 'dog', '?'],
						 ['am', 'I', 'very', 'smart', '?']]
			$(function play() {
				level += 1
				
				sentence = sentences[level-1]
				words = questions[level-1]
				question = words.join('')

				$("#wordblock").sortable();
				$("#wordblock").disableSelection();
				
				$("#sentence_").html(sentence);

				shuffle(words);

				const lis = [];
				for (let i = 0; i < words.length; i++) {
					lis.push('<li class="ui-state-default">' + words[i] + '</li>')
				}
					
				$('#wordblock').html(lis.join(''));

				$('#wordblock').mouseup(function() {
					setTimeout(() => {
						let r_sentence = '';
						$('#wordblock>li').each(function(e) {
							r_sentence += $(this).text();
						});
						if ((r_sentence == question) && (score < level)) {
							score += 1
							$('#wordblock>li').each(function(e) {
								$(this).css("background-color", '#33d9b2');
							});
							$('#score_cnt').text('Очки: ' + score + '/12');
							if (level < sentences.length) {
								setTimeout(play,2000)
							}
						}
						
					}, 0);
				  });

				});

				function shuffle(a, b, c, d) {
				  c = a.length;
				  while (c) b = Math.random() * (--c + 1) | 0, d = a[c], a[c] = a[b], a[b] = d
				}
		</script>
	</body>
</html>